
<div id="toastContainer" style="position: fixed; top: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 12px; max-width: 420px;"></div>


<div id="toastContainerBottom" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 12px; max-width: 420px;"></div>

<style>
    /* Toast Base Styles */
    .toast-notification {
        padding: 14px 16px;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 12px;
        animation: slideInRight 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        background-color: white;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Success Toast */
    .toast-notification.success {
        background: linear-gradient(135deg, rgba(52, 199, 89, 0.95) 0%, rgba(34, 177, 76, 0.95) 100%);
        color: white;
    }

    .toast-notification.success .toast-icon {
        color: #ffffff;
        font-size: 18px;
    }

    .toast-notification.success .toast-close {
        color: rgba(255, 255, 255, 0.8);
    }

    .toast-notification.success .toast-close:hover {
        color: white;
    }

    /* Danger Toast */
    .toast-notification.danger {
        background: linear-gradient(135deg, rgba(255, 59, 48, 0.95) 0%, rgba(229, 57, 53, 0.95) 100%);
        color: white;
    }

    .toast-notification.danger .toast-icon {
        color: #ffffff;
        font-size: 18px;
    }

    .toast-notification.danger .toast-close {
        color: rgba(255, 255, 255, 0.8);
    }

    .toast-notification.danger .toast-close:hover {
        color: white;
    }

    /* Warning Toast */
    .toast-notification.warning {
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.95) 0%, rgba(255, 152, 0, 0.95) 100%);
        color: white;
    }

    .toast-notification.warning .toast-icon {
        color: #ffffff;
        font-size: 18px;
    }

    .toast-notification.warning .toast-close {
        color: rgba(255, 255, 255, 0.8);
    }

    .toast-notification.warning .toast-close:hover {
        color: white;
    }

    /* Info Toast */
    .toast-notification.info {
        background: linear-gradient(135deg, rgba(0, 102, 255, 0.95) 0%, rgba(13, 110, 253, 0.95) 100%);
        color: white;
    }

    .toast-notification.info .toast-icon {
        color: #ffffff;
        font-size: 18px;
    }

    .toast-notification.info .toast-close {
        color: rgba(255, 255, 255, 0.8);
    }

    .toast-notification.info .toast-close:hover {
        color: white;
    }

    /* Toast Icon */
    .toast-icon {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 20px;
    }

    /* Toast Message Container */
    .toast-message {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
        line-height: 1.5;
    }

    .toast-title {
        font-weight: 600;
        font-size: 14px;
    }

    .toast-text {
        font-weight: 400;
        font-size: 13px;
        opacity: 0.95;
    }

    /* Toast Close Button */
    .toast-close {
        margin-left: auto;
        padding: 4px 8px;
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
        opacity: 0.8;
        transition: opacity 0.2s ease, transform 0.2s ease;
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .toast-close:hover {
        opacity: 1;
        transform: scale(1.1);
    }

    .toast-close:active {
        transform: scale(0.95);
    }

    /* Progress Bar */
    .toast-progress {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 0 0 10px 0;
    }

    /* Animations */
    @@keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(400px) rotateZ(5deg);
        }
        to {
            opacity: 1;
            transform: translateX(0) rotateZ(0deg);
        }
    }

    @@keyframes slideOutRight {
        from {
            opacity: 1;
            transform: translateX(0) rotateZ(0deg);
        }
        to {
            opacity: 0;
            transform: translateX(400px) rotateZ(5deg);
        }
    }

    @@keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-400px) rotateZ(-5deg);
        }
        to {
            opacity: 1;
            transform: translateX(0) rotateZ(0deg);
        }
    }

    @@keyframes slideOutLeft {
        from {
            opacity: 1;
            transform: translateX(0) rotateZ(0deg);
        }
        to {
            opacity: 0;
            transform: translateX(-400px) rotateZ(-5deg);
        }
    }

    @@keyframes progressShrink {
        from {
            width: 100%;
        }
        to {
            width: 0%;
        }
    }

    /* Toast Bottom Position */
    .toast-notification.bottom-position {
        animation: slideInLeft 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .toast-notification.bottom-position.removing {
        animation: slideOutLeft 0.3s ease-in forwards;
    }

    .toast-notification.removing {
        animation: slideOutRight 0.3s ease-in forwards;
    }

    /* Responsive Design */
    @@media (max-width: 600px) {
        #toastContainer,
        #toastContainerBottom {
            max-width: 90vw;
            left: 5vw !important;
            right: 5vw !important;
        }

        .toast-notification {
            padding: 12px 14px;
            font-size: 13px;
            gap: 10px;
        }

        .toast-icon {
            font-size: 16px;
        }
    }

    /* Dark Mode Support */
    @@media (prefers-color-scheme: dark) {
        .toast-notification {
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        }
    }
</style>

<script>
    // Initialize toast system with enhanced features
    window.Toast = window.Toast || {};

    // Configuration
    const toastConfig = {
        position: 'top-right',
        enableSound: false,
        maxToasts: 5,
        showProgressBar: true,
    };

    // Active toasts tracking
    let activeToasts = [];

    // Sound effect for notifications (optional)
    const playNotificationSound = function() {
        if (!toastConfig.enableSound) return;
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            oscillator.connect(gain);
            gain.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gain.gain.setValueAtTime(0.3, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        } catch(e) {
            // Silently fail if audio not available
        }
    };

    // Main show function
    window.Toast.show = function(message, type = 'info', duration = 3000, options = {}) {
        const position = options.position || toastConfig.position;
        const containerId = position === 'bottom-right' ? 'toastContainerBottom' : 'toastContainer';
        const toastContainer = document.getElementById(containerId);
        
        if (!toastContainer) return;

        // Check max toasts limit
        if (activeToasts.length >= toastConfig.maxToasts) {
            const oldestToast = activeToasts.shift();
            if (oldestToast && oldestToast.parentElement) {
                oldestToast.classList.add('removing');
                setTimeout(() => oldestToast.remove(), 300);
            }
        }

        // Create toast element
        const toast = document.createElement('div');
        const classes = ['toast-notification', type];
        if (position === 'bottom-right') classes.push('bottom-position');
        toast.className = classes.join(' ');

        // Icon mapping
        const iconClass = {
            'success': 'check-circle',
            'danger': 'times-circle',
            'warning': 'exclamation-circle',
            'info': 'info-circle'
        }[type] || 'info-circle';

        // Extract title if provided
        const title = options.title || '';
        const messageHtml = title 
            ? `<div class="toast-title">${title}</div><div class="toast-text">${message}</div>`
            : message;

        // Build toast HTML
        toast.innerHTML = `
            <i class="fas fa-${iconClass} toast-icon"></i>
            <div class="toast-message">${messageHtml}</div>
            <button type="button" class="toast-close" aria-label="Close notification">
                <i class="fas fa-times"></i>
            </button>
            ${toastConfig.showProgressBar ? '<div class="toast-progress" style="animation: progressShrink ' + duration + 'ms linear forwards;"></div>' : ''}
        `;

        // Add close button handler
        const closeBtn = toast.querySelector('.toast-close');
        const removeToast = () => {
            toast.classList.add('removing');
            setTimeout(() => {
                toast.remove();
                activeToasts = activeToasts.filter(t => t !== toast);
            }, 300);
        };
        
        closeBtn.onclick = removeToast;

        // Append to container
        toastContainer.appendChild(toast);
        activeToasts.push(toast);

        // Play notification sound
        playNotificationSound();

        // Auto remove after duration
        const timeoutId = setTimeout(() => {
            if (toast.parentElement) {
                removeToast();
            }
        }, duration);

        // Store timeout for clearing if toast is closed early
        toast.timeoutId = timeoutId;

        return toast;
    };

    // Convenience methods
    window.Toast.success = function(message, duration = 3000, options = {}) {
        return this.show(message, 'success', duration, options);
    };

    window.Toast.error = function(message, duration = 4000, options = {}) {
        return this.show(message, 'danger', duration, options);
    };

    window.Toast.warning = function(message, duration = 3500, options = {}) {
        return this.show(message, 'warning', duration, options);
    };

    window.Toast.info = function(message, duration = 3000, options = {}) {
        return this.show(message, 'info', duration, options);
    };

    // Additional helper methods
    window.Toast.setPosition = function(position) {
        if (['top-right', 'bottom-right'].includes(position)) {
            toastConfig.position = position;
        }
    };

    window.Toast.setEnableSound = function(enable) {
        toastConfig.enableSound = enable;
    };

    window.Toast.clear = function() {
        activeToasts.forEach(toast => {
            if (toast.parentElement) {
                toast.classList.add('removing');
                clearTimeout(toast.timeoutId);
                setTimeout(() => toast.remove(), 300);
            }
        });
        activeToasts = [];
    };

    window.Toast.setMaxToasts = function(max) {
        toastConfig.maxToasts = Math.max(1, max);
    };

    window.Toast.setShowProgressBar = function(show) {
        toastConfig.showProgressBar = show;
    };
</script>
