@page
@model SmartCampus.Web.Pages.Lessons.EditModel
@{
    ViewData["Title"] = "Edit Lesson";
}


<div style="background: linear-gradient(135deg, #0066ff 0%, #0052cc 100%); border-radius: 20px; padding: 35px 30px; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0, 102, 255, 0.15); position: relative; overflow: hidden;">
    <div style="position: absolute; top: -40px; right: -40px; width: 180px; height: 180px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
    <div style="position: relative; z-index: 1;">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <a asp-page="Index" style="color: rgba(255, 255, 255, 0.8); text-decoration: none; font-size: 0.95rem;">
                        <i class="fas fa-arrow-left me-1"></i>Back
                    </a>
                    <span style="color: rgba(255, 255, 255, 0.6);">/</span>
                    <span style="color: rgba(255, 255, 255, 0.8);">Edit</span>
                </div>
                <h1 style="font-size: 2.5rem; font-weight: 800; color: white; margin: 0;">
                    <i class="fas fa-edit me-2"></i>Edit Lesson
                </h1>
                <p style="color: rgba(255, 255, 255, 0.9); margin: 8px 0 0 0; font-size: 1rem;">
                    <i class="fas fa-pen-fancy me-1"></i>Update lesson details
                </p>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-lg-8">
        <form method="post" class="needs-validation" novalidate>
            @Html.AntiForgeryToken()
            
            <div class="card border-0 mb-4" style="border-radius: 14px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);">
                <div style="background: linear-gradient(135deg, #f5f5f7, #efefef); border-bottom: 1px solid #e5e5ea; padding: 18px 20px; border-radius: 14px 14px 0 0;">
                    <h5 style="margin: 0; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                        <i class="fas fa-file-alt" style="color: #0066ff;"></i>Lesson Details
                    </h5>
                </div>

                <div class="card-body" style="padding: 24px;">
                    
                    <input type="hidden" asp-for="Lesson.Id" />

                    
                    <div class="mb-4">
                        <label asp-for="Lesson.Title" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                            <i class="fas fa-heading me-1" style="color: #0066ff;"></i>Lesson Title <span class="text-danger">*</span>
                        </label>
                        <input asp-for="Lesson.Title" class="form-control" required style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 10px 12px; font-size: 0.95rem;" />
                        <small class="form-text text-muted">Update the lesson title if needed</small>
                        <span asp-validation-for="Lesson.Title" class="text-danger small d-block mt-1"></span>
                    </div>

                    
                    <div class="mb-4">
                        <label asp-for="Lesson.GroupId" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                            <i class="fas fa-users me-1" style="color: #0066ff;"></i>Target Group <span class="text-danger">*</span>
                        </label>
                        <select asp-for="Lesson.GroupId" class="form-select" required style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 10px 12px; font-size: 0.95rem;">
                            <option value="">-- Select Group --</option>
                            @foreach (var group in Model.Groups)
                            {
                                <option value="@group.Id" selected="@(group.Id == Model.Lesson.GroupId)">@group.GroupName</option>
                            }
                        </select>
                        <small class="form-text text-muted">You can reassign to a different group</small>
                        <span asp-validation-for="Lesson.GroupId" class="text-danger small d-block mt-1"></span>
                    </div>

                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label asp-for="Lesson.LessonNumber" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                                <i class="fas fa-hashtag me-1" style="color: #0066ff;"></i>Lesson Number <span class="text-danger">*</span>
                            </label>
                            <input asp-for="Lesson.LessonNumber" class="form-control" type="number" required style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 10px 12px; font-size: 0.95rem;" />
                            <small class="form-text text-muted">Use sequential numbering</small>
                            <span asp-validation-for="Lesson.LessonNumber" class="text-danger small d-block mt-1"></span>
                        </div>
                        <div class="col-md-6 mb-4">
                            <label asp-for="Lesson.LessonDate" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                                <i class="fas fa-calendar-alt me-1" style="color: #0066ff;"></i>Date & Time <span class="text-danger">*</span>
                            </label>
                            <input asp-for="Lesson.LessonDate" class="form-control" type="datetime-local" required style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 10px 12px; font-size: 0.95rem;" />
                            <small class="form-text text-muted">Update the lesson date if needed</small>
                            <span asp-validation-for="Lesson.LessonDate" class="text-danger small d-block mt-1"></span>
                        </div>
                    </div>

                    
                    <div class="mb-4">
                        <label asp-for="Lesson.Location" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                            <i class="fas fa-map-marker me-1" style="color: #0066ff;"></i>Location
                        </label>
                        <input asp-for="Lesson.Location" class="form-control" style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 10px 12px; font-size: 0.95rem;" />
                        <small class="form-text text-muted">Update the lesson location</small>
                        <span asp-validation-for="Lesson.Location" class="text-danger small d-block mt-1"></span>
                    </div>

                    
                    <div class="mb-4">
                        <label asp-for="Lesson.Content" class="form-label" style="font-weight: 600; color: #1d1d1f; margin-bottom: 8px;">
                            <i class="fas fa-align-left me-1" style="color: #0066ff;"></i>Content & Materials
                        </label>
                        <textarea asp-for="Lesson.Content" class="form-control" rows="7" style="border: 2px solid #e5e5ea; border-radius: 10px; padding: 12px; font-size: 0.95rem; font-family: inherit;"></textarea>
                        <small class="form-text text-muted">Update lesson content and materials</small>
                        <span asp-validation-for="Lesson.Content" class="text-danger small d-block mt-1"></span>
                    </div>

                    
                    <div class="mb-4">
                        <div class="form-check" style="display: flex; align-items: center; gap: 10px;">
                            <input class="form-check-input" type="checkbox" asp-for="Lesson.IsCompleted" id="isCompleted" style="width: 20px; height: 20px; cursor: pointer;">
                            <label class="form-check-label" for="isCompleted" style="font-weight: 600; color: #1d1d1f; margin: 0; cursor: pointer;">
                                <i class="fas fa-check-circle me-1" style="color: #34c759;"></i>Mark as Completed
                            </label>
                        </div>
                        <small class="form-text text-muted">Check if this lesson has been completed</small>
                    </div>
                </div>

                
                <div style="background: #f9f9fb; border-top: 1px solid #e5e5ea; padding: 18px 20px; border-radius: 0 0 14px 14px; display: flex; gap: 10px; justify-content: flex-end; flex-wrap: wrap;">
                    <a asp-page="Index" class="btn" style="background: #f5f5f7; color: #1d1d1f; border: none; padding: 10px 18px; border-radius: 8px; text-decoration: none; font-weight: 500;">
                        <i class="fas fa-times me-1"></i>Cancel
                    </a>
                    <button type="submit" class="btn" style="background: linear-gradient(135deg, #0066ff, #0052cc); color: white; border: none; padding: 10px 24px; border-radius: 8px; font-weight: 500;">
                        <i class="fas fa-check-circle me-1"></i>Update Lesson
                    </button>
                </div>
            </div>
        </form>
    </div>

    
    <div class="col-lg-4">
        <div class="card border-0" style="border-radius: 14px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); margin-bottom: 20px;">
            <div style="background: linear-gradient(135deg, #f5f5f7, #efefef); border-bottom: 1px solid #e5e5ea; padding: 18px 20px; border-radius: 14px 14px 0 0;">
                <h6 style="margin: 0; font-weight: 700; display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-info-circle" style="color: #0066ff;"></i>About Editing
                </h6>
            </div>
            <div class="card-body" style="padding: 18px;">
                <div style="margin-bottom: 14px;">
                    <small style="display: block; font-weight: 600; color: #1d1d1f; margin-bottom: 4px;">
                        <i class="fas fa-exclamation-circle me-1" style="color: #ff9500;"></i>Changes Affect All
                    </small>
                    <small style="color: #636366; line-height: 1.5;">Any updates you make will be reflected for all students in this group.</small>
                </div>
                <div style="margin-bottom: 14px;">
                    <small style="display: block; font-weight: 600; color: #1d1d1f; margin-bottom: 4px;">
                        <i class="fas fa-check-circle me-1" style="color: #34c759;"></i>Lesson Date Changes
                    </small>
                    <small style="color: #636366; line-height: 1.5;">If you change the date, students will see the updated schedule immediately.</small>
                </div>
                <div style="margin-bottom: 14px;">
                    <small style="display: block; font-weight: 600; color: #1d1d1f; margin-bottom: 4px;">
                        <i class="fas fa-shield-alt me-1" style="color: #34c759;"></i>Attendance Data
                    </small>
                    <small style="color: #636366; line-height: 1.5;">Updating won't affect attendance records or grades.</small>
                </div>
            </div>
        </div>

        <div class="alert" style="background: #e3f2fd; border-left: 4px solid #0066ff; border-radius: 10px; color: #0051ba;">
            <small style="font-weight: 600; display: block; margin-bottom: 6px;">
                <i class="fas fa-lightbulb me-1"></i>Pro Tip
            </small>
            <small>Keep your content clear and updated. Edit promptly if students report confusion about materials.</small>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
